
{% extends 'layout.html' %}
{% block title %} {{title}} {%endblock%}


{% block head %}
<link rel="stylesheet" type="text/css" href="/stylesheets/gallery/stylewall.css" />

<script type="text/javascript" src="/javascripts/gallery/modernizr.custom.js"></script>
{% endblock %}

{% block content %}		
		<div class="content">
			<div class="title">
				<img src="/images/des/2/8.jpg"/>
				<h1>历史人文图像长廊</h1>
				<span>杭州　-　博物馆　纪念馆　艺术馆</span>
			</div>
			<div class="iw_wrapper">
				<ul class="iw_thumbs" id="iw_thumbs">
					<li><img src="/images/des/2/1.jpg" data-img="/images/des/2/1.jpg" alt="Thumb1"/><div><h2>杭州博物馆</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/2.jpg" data-img="/images/des/2/2.jpg" alt="Thumb2"/><div><h2>杭州东方圆木博物馆</h2></div></li>
					<li><img src="/images/des/2/3.jpg" data-img="/images/des/2/3.jpg" alt="Thumb3"/><div><h2>杭州都锦生织锦博物馆</h2></div></li>
					<li><img src="/images/des/2/4.jpg" data-img="/images/des/2/4.jpg" alt="Thumb4"/><div><h2>杭州高氏照相机博物馆</h2></div></li>
					<li><img src="/images/des/2/5-1.jpg" data-img="/images/des/2/5-1.jpg" alt="Thumb51"/><div><h2>杭州工艺美术博物馆</h2></div></li>
					<li><img src="/images/des/2/5-2.jpg" data-img="/images/des/2/5-2.jpg" alt="Thumb52"/><div><h2>中国刀剪剑博物馆</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/5-3.jpg" data-img="/images/des/2/5-3.jpg" alt="Thumb53"/><div><h2>中国伞博物馆</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/5-4.jpg" data-img="/images/des/2/5-4.jpg" alt="Thumb54"/><div><h2>中国扇博物馆</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/6.jpg" data-img="/images/des/2/6.jpg" alt="Thumb6"/><div><h2>杭州胡庆余堂中药博物馆</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/7.jpg" data-img="/images/des/2/7.jpg" alt="Thumb7"/><div><h2>杭州华夏紫砂博物馆</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/8.jpg" data-img="/images/des/2/8.jpg" alt="Thumb8"/><div><h2>杭州京杭大运河博物馆</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/9.jpg" data-img="/images/des/2/9.jpg" alt="Thumb9"/><div><h2>杭州南宋官窑博物馆</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/10.jpg" data-img="/images/des/2/10.jpg" alt="Thumb10"/><div><h2>杭州南宋钱币博物馆</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/11.jpg" data-img="/images/des/2/11.jpg" alt="Thumb11"/><div><h2>杭州南宋遗址陈列馆</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/12.jpg" data-img="/images/des/2/12.jpg" alt="Thumb12"/><div><h2>杭州神博农家博物苑</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/13.jpg" data-img="/images/des/2/13.jpg" alt="Thumb13"/><div><h2>杭州世界钱币博物馆</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/14.jpg" data-img="/images/des/2/14.jpg" alt="Thumb14"/><div><h2>杭州市萧山跨湖桥遗址博物馆</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/15.jpg" data-img="/images/des/2/15.jpg" alt="Thumb15"/><div><h2>杭州市萧山区博物馆</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/16.jpg" data-img="/images/des/2/16.jpg" alt="Thumb16"/><div><h2>杭州市萧山区湘湖吴越古文化博物馆</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/17.jpg" data-img="/images/des/2/17.jpg" alt="Thumb17"/><div><h2>杭州市余杭博物馆</h2><p>江南水乡博物馆</p></div></li>
					<li><img src="/images/des/2/18.jpg" data-img="/images/des/2/18.jpg" alt="Thumb18"/><div><h2>杭州土火斋古陶瓷博物馆</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/19.jpg" data-img="/images/des/2/19.jpg" alt="Thumb19"/><div><h2>杭州西湖博览会博物馆</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/20.jpg" data-img="/images/des/2/20.jpg" alt="Thumb20"/><div><h2>杭州眼镜博物馆</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/21.jpg" data-img="/images/des/2/21.jpg" alt="Thumb21"/><div><h2>良渚博物院</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/22.jpg" data-img="/images/des/2/22.jpg" alt="Thumb22"/><div><h2>桐庐博物馆</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/23.jpg" data-img="/images/des/2/23.jpg" alt="Thumb23"/><div><h2>西湖博物馆</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/24.jpg" data-img="/images/des/2/24.jpg" alt="Thumb24"/><div><h2>浙江省博物馆</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/25.jpg" data-img="/images/des/2/25.jpg" alt="Thumb25"/><div><h2>浙江朱炳仁铜雕艺术博物馆</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/26.jpg" data-img="/images/des/2/26.jpg" alt="Thumb26"/><div><h2>浙江自然博物馆</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/27.jpg" data-img="/images/des/2/27.jpg" alt="Thumb27"/><div><h2>中国财税博物馆</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/28.jpg" data-img="/images/des/2/28.jpg" alt="Thumb28"/><div><h2>中国茶叶博物馆</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/29.jpg" data-img="/images/des/2/29.jpg" alt="Thumb29"/><div><h2>中国湿地博物馆</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/30.jpg" data-img="/images/des/2/30.jpg" alt="Thumb30"/><div><h2>中国水利博物馆</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/31.jpg" data-img="/images/des/2/31.jpg" alt="Thumb31"/><div><h2>中国丝绸博物馆</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/32.jpg" data-img="/images/des/2/32.jpg" alt="Thumb32"/><div><h2>中国印学博物馆</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/33.jpg" data-img="/images/des/2/33.jpg" alt="Thumb33"/><div><h2>大韩民国临时政府杭州旧址纪念馆</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/34.jpg" data-img="/images/des/2/34.jpg" alt="Thumb34"/><div><h2>龚自珍纪念馆</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/35.jpg" data-img="/images/des/2/35.jpg" alt="Thumb35"/><div><h2>韩美林艺术馆</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/36.jpg" data-img="/images/des/2/36.jpg" alt="Thumb36"/><div><h2>杭州孔庙</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/37.jpg" data-img="/images/des/2/37.jpg" alt="Thumb37"/><div><h2>杭州李叔同纪念馆</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/38.jpg" data-img="/images/des/2/38.jpg" alt="Thumb38"/><div><h2>杭州名人纪念馆</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/38-1.jpg" data-img="/images/des/2/38-1.jpg" alt="Thumb381"/><div><h2>司徒雷登故居</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/38-2.jpg" data-img="/images/des/2/38-2.jpg" alt="Thumb382"/><div><h2>苏东坡纪念馆</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/38-3.jpg" data-img="/images/des/2/38-3.jpg" alt="Thumb383"/><div><h2>唐云艺术馆</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/38-4.jpg" data-img="/images/des/2/38-4.jpg" alt="Thumb384"/><div><h2>于谦祠</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/38-5.jpg" data-img="/images/des/2/38-5.jpg" alt="Thumb385"/><div><h2>于谦故居</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/38-6.jpg" data-img="/images/des/2/38-6.jpg" alt="Thumb386"/><div><h2>张苍水祠</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/38-7.jpg" data-img="/images/des/2/38-7.jpg" alt="Thumb387"/><div><h2>章太炎纪念馆</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/39.jpg" data-img="/images/des/2/39.jpg" alt="Thumb39"/><div><h2>杭州市梅家坞周总理纪念室</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/40.jpg" data-img="/images/des/2/40.jpg" alt="Thumb40"/><div><h2>连横纪念馆</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/41.jpg" data-img="/images/des/2/41.jpg" alt="Thumb41"/><div><h2>马一浮纪念馆</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/42.jpg" data-img="/images/des/2/42.jpg" alt="Thumb42"/><div><h2>马寅初纪念馆</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/43.jpg" data-img="/images/des/2/43.jpg" alt="Thumb43"/><div><h2>潘天寿纪念馆</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/44.jpg" data-img="/images/des/2/44.jpg" alt="Thumb44"/><div><h2>钱塘江大桥纪念馆</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/45.jpg" data-img="/images/des/2/45.jpg" alt="Thumb45"/><div><h2>叶浅予艺术馆</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/46.jpg" data-img="/images/des/2/46.jpg" alt="Thumb46"/><div><h2>俞曲园纪念馆</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/47.jpg" data-img="/images/des/2/47.jpg" alt="Thumb47"/><div><h2>岳飞纪念馆</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/48.jpg" data-img="/images/des/2/48.jpg" alt="Thumb48"/><div><h2>浙江革命烈士纪念馆</h2><p>翰墨丹青</p></div></li>
					<li><img src="/images/des/2/49.jpg" data-img="/images/des/2/49.jpg" alt="Thumb49"/><div><h2>浙江辛亥革命纪念馆</h2><p>翰墨丹青</p></div></li>
				</ul>
			</div>
			<div id="iw_ribbon" class="iw_ribbon">
				<span class="iw_close"></span>
				<span class="iw_zoom">Click thumb to zoom</span>
			</div>
		</div>
		<!--Footer-->
<!-- 		<footer class = "footer">
			<div class="major">
				<h2>联系我们</h2>
	     	  	<a href="">  <span>E-mail: yingshu2008@gmail.com</span></a> 
				<hr/>
			</div>	
		</footer>
 -->
		
		<script type="text/javascript" src="/javascripts/gallery/jquery.min.js"></script>
		<script type="text/javascript" src="/javascripts/gallery/jquery.masonry.min.js"></script>
		<script type="text/javascript" src="/javascripts/gallery/jquery.easing.1.3.js"></script>
		<script type="text/javascript">
			$(window).load(function(){
				var $iw_thumbs			= $('#iw_thumbs'),
					$iw_ribbon			= $('#iw_ribbon'),
					$iw_ribbon_close	= $iw_ribbon.children('span.iw_close'),
					$iw_ribbon_zoom		= $iw_ribbon.children('span.iw_zoom');
					
					ImageWall	= (function() {
							// window width and height
						var w_dim,
						    // index of current image
							current				= -1,
							isRibbonShown		= false,
							isFullMode			= false,
							// ribbon / images animation settings
							ribbonAnim			= {speed : 500, easing : 'easeOutExpo'},
							imgAnim				= {speed : 400, easing : 'jswing'},
							// init function : call masonry, calculate window dimentions, initialize some events
							init				= function() {
								$iw_thumbs.imagesLoaded(function(){
									$iw_thumbs.masonry({
										isAnimated	: true
									});
								});
								getWindowsDim();
								initEventsHandler();
							},
							// calculate window dimentions
							getWindowsDim		= function() {
								w_dim = {
									width	: $(window).width(),
									height	: $(window).height()
								};
							},
							// initialize some events
							initEventsHandler	= function() {
								
								// click on a image
								$iw_thumbs.delegate('li', 'click', function() {
									if($iw_ribbon.is(':animated')) return false;
									
									var $el = $(this);
									
									if($el.data('ribbon')) {
										showFullImage($el);
									}
									else if(!isRibbonShown) {
										isRibbonShown = true;
										
										$el.data('ribbon',true);
										
										// set the current
										current = $el.index();
									
										showRibbon($el);
									}
								});
								
								// click ribbon close
								$iw_ribbon_close.bind('click', closeRibbon);
								
								// on window resize we need to recalculate the window dimentions
								$(window).bind('resize', function() {
											getWindowsDim();
											if($iw_ribbon.is(':animated'))
												return false;
											closeRibbon();
										 })
								         .bind('scroll', function() {
											if($iw_ribbon.is(':animated'))
												return false;
											closeRibbon();
										 });
								
							},
							showRibbon			= function($el) {
								var	$img	= $el.children('img'),
									$descrp	= $img.next();
								
								// fadeOut all the other images
								$iw_thumbs.children('li').not($el).animate({opacity : 0.2}, imgAnim.speed);
								
								// increase the image z-index, and set the height to 100px (default height)
								$img.css('z-index', 100)
									.data('originalHeight',$img.height())
									.stop()
									.animate({
										height 		: '100px'
									}, imgAnim.speed, imgAnim.easing);
								
								// the ribbon will animate from the left or right
								// depending on the position of the image
								var ribbonCssParam 		= {
										top	: $el.offset().top - $(window).scrollTop() - 6 + 'px'
									},
									descriptionCssParam,
									dir;
								
								if( $el.offset().left < (w_dim.width / 2) ) {
									dir = 'left';
									ribbonCssParam.left 	= 0;
									ribbonCssParam.right 	= 'auto';
								}
								else {
									dir = 'right';
									ribbonCssParam.right 	= 0;
									ribbonCssParam.left 	= 'auto';
								}
								
								$iw_ribbon.css(ribbonCssParam)
								          .show()
										  .stop()
										  .animate({width : '100%'}, ribbonAnim.speed, ribbonAnim.easing, function() {
												switch(dir) {
													case 'left' :
														descriptionCssParam		= {
															'left' 			: $img.outerWidth(true) + 'px',
															'text-align' 	: 'left'
														};
														break;
													case 'right' :	
														descriptionCssParam		= {
															'left' 			: '-200px',
															'text-align' 	: 'right'
														};
														break;
												};
												$descrp.css(descriptionCssParam).fadeIn();
												// show close button and zoom
												$iw_ribbon_close.show();
												$iw_ribbon_zoom.show();
										  });
								
							},
							// close the ribbon
							// when in full mode slides in the middle of the page
							// when not slides left
							closeRibbon			= function() {
								isRibbonShown 	= false
								
								$iw_ribbon_close.hide();
								$iw_ribbon_zoom.hide();
								
								if(!isFullMode) {
								
									// current wall image
									var $el	 		= $iw_thumbs.children('li').eq(current);
									
									resetWall($el);
									
									// slide out ribbon
									$iw_ribbon.stop()
											  .animate({width : '0%'}, ribbonAnim.speed, ribbonAnim.easing); 
										  
								}
								else {
									$iw_ribbon.stop().animate({
										opacity		: 0.8,
										height 		: '0px',
										marginTop	: w_dim.height/2 + 'px' // half of window height
									}, ribbonAnim.speed, function() {
										$iw_ribbon.css({
											'width'		: '0%',
											'height'	: '126px',
											'margin-top': '0px'
										}).children('img').remove();
									});
									
									isFullMode	= false;
								}
							},
							resetWall			= function($el) {
								var $img		= $el.children('img'),
									$descrp		= $img.next();
									
								$el.data('ribbon',false);
								
								// reset the image z-index and height
								$img.css('z-index',1).stop().animate({
									height 		: $img.data('originalHeight')
								}, imgAnim.speed,imgAnim.easing);
								
								// fadeOut the description
								$descrp.fadeOut();

								// fadeIn all the other images
								$iw_thumbs.children('li').not($el).animate({opacity : 1}, imgAnim.speed);								
							},
							showFullImage		= function($el) {
								isFullMode	= true;
								
								$iw_ribbon_close.hide();
								
								var	$img	= $el.children('img'),
									large	= $img.data('img'),
								
									// add a loading image on top of the image
									$loading = $('<span class="iw_loading"></span>');
								
								$el.append($loading);
								
								// preload large image
								$('<img/>').load(function() {
									var $largeImage	= $(this);
									
									$loading.remove();
									
									$iw_ribbon_zoom.hide();
									
									resizeImage($largeImage);
									
									// reset the current image in the wall
									resetWall($el);
									
									// animate ribbon in and out
									$iw_ribbon.stop().animate({
										opacity		: 1,
										height 		: '0px',
										marginTop	: '63px' // half of ribbons height
									}, ribbonAnim.speed, function() {
										// add the large image to the DOM
										$iw_ribbon.prepend($largeImage);
										
										$iw_ribbon_close.show();
										
										$iw_ribbon.animate({
											height 		: '100%',
											marginTop	: '0px',
											top			: '0px'
										}, ribbonAnim.speed);
									});
								}).attr('src',large);
									
							},
							resizeImage			= function($image) {
								var widthMargin		= 100,
									heightMargin 	= 100,
								
									windowH      	= w_dim.height - heightMargin,
									windowW      	= w_dim.width - widthMargin,
									theImage     	= new Image();
									
								theImage.src     	= $image.attr("src");
								
								var imgwidth     	= theImage.width,
									imgheight    	= theImage.height;

								if((imgwidth > windowW) || (imgheight > windowH)) {
									if(imgwidth > imgheight) {
										var newwidth 	= windowW,
											ratio 		= imgwidth / windowW,
											newheight 	= imgheight / ratio;
											
										theImage.height = newheight;
										theImage.width	= newwidth;
										
										if(newheight > windowH) {
											var newnewheight 	= windowH,
												newratio 		= newheight/windowH,
												newnewwidth 	= newwidth/newratio;
										
											theImage.width 		= newnewwidth;
											theImage.height		= newnewheight;
										}
									}
									else {
										var newheight 	= windowH,
											ratio 		= imgheight / windowH,
											newwidth 	= imgwidth / ratio;
										
										theImage.height = newheight;
										theImage.width	= newwidth;
										
										if(newwidth > windowW) {
											var newnewwidth 	= windowW,
											    newratio 		= newwidth/windowW,
												newnewheight 	= newheight/newratio;
									
											theImage.height 	= newnewheight;
											theImage.width		= newnewwidth;
										}
									}
								}
									
								$image.css({
									'width'			: theImage.width + 'px',
									'height'		: theImage.height + 'px',
									'margin-left'	: -theImage.width / 2 + 'px',
									'margin-top'	: -theImage.height / 2 + 'px'
								});							
							};
							
						return {init : init};	
					})();
				
				ImageWall.init();
			});
		</script>
 {% endblock %}